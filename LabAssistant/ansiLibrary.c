/* *  mem.c * *  Copyright (c) 1991 Symantec Corporation.  All rights reserved. * */int sprintf(char *, const char *, ...);int vfprintf(FILE *, const char *, void *);int sscanf(const char *, const char *, ...);int _vsscanf(const char *, const char *, void *);#pragma options(!require_protos)void *memcpy(/* void *s1, const void *s2, size_t n */){	asm {		move.l	4(sp),d0		;  D0.L = result		movea.l	d0,a0			;  A0 = s1		movea.l	8(sp),a1		;  A1 = s2		move.l	12(sp),d1		;  D1.L = n		bra.s	@2@1		move.b	(a1)+,(a0)+		subq.l	#1,d1@2		bne.s	@1	}}/* *  strn.c * *  Copyright (c) 1991 Symantec Corporation.  All rights reserved. * */char *strncpy(/* char *s1, const char *s2, size_t n */){	asm {		move.l	4(sp),d0		;  D0.L = result		movea.l	d0,a0			;  A0 = s1		movea.l	8(sp),a1		;  A1 = s2		move.l	12(sp),d1		;  D1.L = n		beq.s	@3@1		move.b	(a1),(a0)+		beq.s	@2		addq.l	#1,a1@2		subq.l	#1,d1		bne.s	@1@3	}}char *strncat(/* char *s1, const char *s2, size_t n */){	asm {		move.l	4(sp),d0		;  D0.L = result		movea.l	d0,a0			;  A0 = s1		movea.l	8(sp),a1		;  A1 = s2		move.l	12(sp),d1		;  D1.L = n		beq.s	@3@1		tst.b	(a0)+		bne.s	@1		subq.l	#1,a0@2		move.b	(a1)+,(a0)+		beq.s	@3		subq.l	#1,d1		bne.s	@2		clr.b	(a0)@3	}}/* ---------- sprintf/sscanf ---------- */intsprintf(char *s, const char *fmt, ...){	return(vsprintf(s, fmt, __va(fmt)));}intvsprintf(char *s, const char *fmt, void *p){	FILE f;	int n;		if ((n = vfprintf(__strout(&f, s), fmt, p)) >= 0)		s[n] = 0;	return(n);}intsscanf(const char *s, const char *fmt, ...){	return(_vsscanf(s, fmt, __va(fmt)));}int_vsscanf(const char *s, const char *fmt, void *p){	FILE f;		return(_vfscanf(__strin(&f, s), fmt, p));}